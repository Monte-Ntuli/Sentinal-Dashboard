<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sentinel - Live Dashboard</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f4f4f9; color: #333; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #2c3e50; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background-color: #2c3e50; color: white; }
        tr:hover { background-color: #f1f1f1; }
        .win { color: green; font-weight: bold; }
        .loss { color: red; font-weight: bold; }
        .status { text-align: center; font-size: 0.9em; color: #777; margin-bottom: 20px; }
    </style>
</head>
<body>

<div class="container">
    <h1>Sentinel v5.00 Results</h1>
    <div class="status" id="last-update">Loading data...</div>
    <table id="trade-table">
        <thead>
            <tr>
                <th>Time</th>
                <th>Symbol</th>
                <th>Type</th>
                <th>Price</th>
                <th>Profit ($)</th>
                <th>Result</th>
            </tr>
        </thead>
        <tbody>
            </tbody>
    </table>
</div>

<script>
    async function loadData() {
        // Prevent caching so we always get the latest version
        const response = await fetch('BEAN_TradeCloseLog.csv?t=' + new Date().getTime());
        const data = await response.text();
        
        const table = document.querySelector('#trade-table tbody');
        const rows = data.split('\n').slice(1); // Skip header row
        
        // Reverse rows to show newest first
        rows.reverse().forEach(row => {
            const cols = row.split(',');
            if (cols.length < 8) return; // Skip empty lines

            // CSV Columns: ExitTime, Symbol, Direction, Lot, EntryPrice, ExitPrice, NetProfit, Result...
            const tr = document.createElement('tr');
            
            // Format Profit Color
            const profitClass = parseFloat(cols[6]) >= 0 ? 'win' : 'loss';

            tr.innerHTML = `
                <td>${cols[0]}</td>
                <td><strong>${cols[1]}</strong></td>
                <td>${cols[2]}</td>
                <td>${cols[5]}</td>
                <td class="${profitClass}">${cols[6]}</td>
                <td>${cols[7]}</td>
            `;
            table.appendChild(tr);
        });
        
        document.getElementById('last-update').innerText = "Last Updated: " + new Date().toLocaleString();
    }

    loadData();
</script>

</body>
</html>